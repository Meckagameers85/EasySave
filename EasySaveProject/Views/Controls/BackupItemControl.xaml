<UserControl x:Class="EasySaveProject.Controls.BackupItemControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="150"
             Width="700">
    <Border Background="#666"
            CornerRadius="15"
            Padding="10"
            Margin="5">
        <StackPanel>
            <!-- Header -->
            <DockPanel>
                <CheckBox Width="20"
                          VerticalAlignment="Center"
                          IsChecked="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged}"/>
                <TextBlock Name="BackupName"
                           Text="{Binding BackupName, UpdateSourceTrigger=PropertyChanged}"
                           FontSize="16"
                           Foreground="White"
                           VerticalAlignment="Center"
                           Margin="10,0"/>

                <!-- ðŸ†• Ã‰tat -->
                <TextBlock Text="{Binding BackupStateText}"
                           FontWeight="Bold"
                           Foreground="LightGreen"
                           VerticalAlignment="Center"
                           Margin="10,0"/>

                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right">
                    <!-- Play -->
                    <Button Name="BackupPlayButton"
                            Width="30"
                            Height="30"
                            Margin="3"
                            ToolTip="Start/Resume"
                            Command="{Binding StartBackupCommand}"
                            IsEnabled="{Binding Progress.CanPlay}">
                        <Path Data="M 0 0 L 10 5 L 0 10 Z"
                              Fill="White"/>
                    </Button>
                    <!-- ðŸ†• Pause -->
                    <Button Name="BackupPauseButton"
                            Width="30"
                            Height="30"
                            Margin="3"
                            ToolTip="Pause"
                            Command="{Binding PauseBackupCommand}">
                        <Path Data="M2,0 H6 V10 H2 Z M8,0 H12 V10 H8 Z"
                              Fill="White"/>
                    </Button>
                    <!-- ðŸ†• Stop -->
                    <Button Name="BackupStopButton"
                            Width="30"
                            Height="30"
                            Margin="3"
                            ToolTip="Stop"
                            Command="{Binding StopBackupCommand}">
                        <Path Data="M2,2 H10 V10 H2 Z"
                              Fill="White"/>
                    </Button>
                    <!-- Edit -->
                    <Button Name="BackupEditButton"
                            Width="30"
                            Height="30"
                            Margin="3"
                            ToolTip="Edit"
                            Command="{Binding EditBackupCommand}">
                        <Path Data="M3,17 L3,14 L14,3 L17,6 L6,17 Z M2,20 L20,20 L20,22 L2,22 Z"
                              Fill="White"/>
                    </Button>
                    <!-- Delete -->
                    <Button Name="BackupDeleteButton"
                            Width="30"
                            Height="30"
                            Margin="3"
                            ToolTip="Delete"
                            Command="{Binding DeleteBackupCommand}">ðŸ—‘</Button>
                </StackPanel>
            </DockPanel>

            <!-- ðŸ†• Barre de progression simple -->
            <StackPanel Margin="0,10,0,0">
                <Grid>
                    <ProgressBar Height="20"
                                 Value="{Binding Progress.ProgressPercentage}"
                                 Maximum="100"
                                 Background="#333"
                                 Foreground="LightGreen"
                                 BorderBrush="Gray"
                                 BorderThickness="1"/>
                    <TextBlock Text="{Binding Progress.ProgressPercentage, StringFormat={}{0:F1}%}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Foreground="White"
                               FontWeight="Bold"/>
                </Grid>
                <TextBlock Text="{Binding Progress.StatusMessage}"
                           Foreground="LightGray"
                           FontSize="10"
                           Margin="0,5,0,0"/>
            </StackPanel>

            <!-- Details (inchangÃ©) -->
            <Grid Margin="0,5,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="100"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <TextBlock Grid.Column="0"
                           Grid.Row="0"
                           Foreground="White">
                    <TextBlock Text="Source: "/>
                    <TextBlock Name="BackupSourcePath"
                               Text="{Binding BackupSource, UpdateSourceTrigger=PropertyChanged}"
                               FontWeight="Bold"
                               Width="600"/>
                </TextBlock>
                <TextBlock Grid.Column="0"
                           Grid.Row="2"
                           Foreground="White">
                    <TextBlock Text="Target: "/>
                    <TextBlock Name="BackupTargetPath"
                               Text="{Binding BackupTarget, UpdateSourceTrigger=PropertyChanged}"
                               FontWeight="Bold"/>
                </TextBlock>
                <TextBlock Grid.Column="2"
                           Grid.Row="0"
                           Foreground="White">
                    <TextBlock Text="Type: "/>
                    <TextBlock Name="BackupType"
                               Text="{Binding BackupType, UpdateSourceTrigger=PropertyChanged}"
                               FontWeight="Bold"/>
                </TextBlock>
                <TextBlock Grid.Column="2"
                           Grid.Row="2"
                           Foreground="White">
                    <TextBlock Text="Cryptage: "/>
                    <TextBlock Name="BackupEncryptType"
                               Text="{Binding IsBackupEncrypted, UpdateSourceTrigger=PropertyChanged}"
                               FontWeight="Bold"/>
                </TextBlock>
            </Grid>
        </StackPanel>
    </Border>
</UserControl>